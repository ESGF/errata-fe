! function(t, e) {
    "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.PYESSV = e() : t.PYESSV = e()
}(window, function() {
    return function(t) {
        var e = {};

        function s(r) {
            if (e[r]) return e[r].exports;
            var i = e[r] = {
                i: r,
                l: !1,
                exports: {}
            };
            return t[r].call(i.exports, i, i.exports, s), i.l = !0, i.exports
        }
        return s.m = t, s.c = e, s.d = function(t, e, r) {
            s.o(t, e) || Object.defineProperty(t, e, {
                enumerable: !0,
                get: r
            })
        }, s.r = function(t) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
                value: "Module"
            }), Object.defineProperty(t, "__esModule", {
                value: !0
            })
        }, s.t = function(t, e) {
            if (1 & e && (t = s(t)), 8 & e) return t;
            if (4 & e && "object" == typeof t && t && t.__esModule) return t;
            var r = Object.create(null);
            if (s.r(r), Object.defineProperty(r, "default", {
                    enumerable: !0,
                    value: t
                }), 2 & e && "string" != typeof t)
                for (var i in t) s.d(r, i, function(e) {
                    return t[e]
                }.bind(null, i));
            return r
        }, s.n = function(t) {
            var e = t && t.__esModule ? function() {
                return t.default
            } : function() {
                return t
            };
            return s.d(e, "a", e), e
        }, s.o = function(t, e) {
            return Object.prototype.hasOwnProperty.call(t, e)
        }, s.p = "", s(s.s = 0)
    }([function(t, e, s) {
        "use strict";
        s.r(e), s.d(e, "WCRP", function() {
            return T
        }), s.d(e, "ESDOC", function() {
            return y
        }), s.d(e, "initialise", function() {
            return w
        });
        const r = (t, e) => _.find(t, t => t.canonicalName.toLowerCase() === e.toLowerCase());
        class i {
            constructor(t) {
                _.each(_.keys(t), e => {
                    this[e] = t[e]
                })
            }
            isMatch(t) {
                return t === self.canonicalName
            }
        }
        class n extends i {
            constructor(t) {
                super(t), this.scopes = _.map(t.scopes, e => new o(t, e))
            }
            getScope(t) {
                return r(this.scopes, t)
            }
        }
        class o extends i {
            constructor(t, e) {
                super(e), this.authority = t, this.collections = _.map(e.collections, s => new c(t, e, s))
            }
            getCollection(t) {
                return r(this.collections, t)
            }
            getTerms(t) {
                let e = this.getCollection(t);
                if (e) return _.sortBy(e.terms, t => _.has(t.data, "sortOrdinal") ? t.data.sortOrdinal : t.canonicalName)
            }
            getTerm(t, e) {
                let s = this.getCollection(t);
                if (s) return r(s.terms, e)
            }
        }
        class c extends i {
            constructor(t, e, s) {
                super(s), this.authority = t, this.scope = e, this.terms = _.map(s.terms, r => new u(t, e, s, r))
            }
        }
        class u extends i {
            constructor(t, e, s, r) {
                super(r), this.authority = t, this.scope = e, this.collection = s
            }
        }
        class a extends n {
            constructor(t) {
                super(t), this.CMIP6 = new d(t, this.getScope("cmip6")), this.ERRATA = new l(t, this.getScope("errata"))
            }
        }
        class d extends o {
            constructor(t, e) {
                super(t, e)
            }
            getModelTopic(t) {
                return _.isUndefined(t) ? this.getTerms("model-topic") : this.getTerm("model-topic", t)
            }
        }
        class l extends o {
            constructor(t, e) {
                super(t, e)
            }
            getModerationStatus(t) {
                return _.isUndefined(t) ? this.getTerms("moderation-status") : this.getTerm("moderation-status", t)
            }
            getPidTaskAction(t) {
                return _.isUndefined(t) ? this.getTerms("pid-task-action") : this.getTerm("pid-task-action", t)
            }
            getPidTaskStatus(t) {
                return _.isUndefined(t) ? this.getTerms("pid-task-status") : this.getTerm("pid-task-status", t)
            }
            getProject(t) {
                return _.isUndefined(t) ? this.getTerms("project") : this.getTerm("project", t)
            }
            getSeverity(t) {
                return _.isUndefined(t) ? this.getTerms("severity") : this.getTerm("severity", t)
            }
            getStatus(t) {
                return _.isUndefined(t) ? this.getTerms("status") : this.getTerm("status", t)
            }
        }
        class p extends n {
            constructor(t) {
                super(t), this.CMIP5 = new h(t, this.getScope("cmip5")), this.CMIP6 = new f(t, this.getScope("cmip6")), this.CORDEX = new g(t, this.getScope("cordex")), this.GLOBAL = new m(t, this.getScope("global"))
            }
        }
        class h extends o {
            constructor(t, e) {
                super(t, e)
            }
        }
        class f extends o {
            constructor(t, e) {
                super(t, e)
            }
            getActivity(t) {
                return _.isUndefined(t) ? this.getTerms("activity-id") : this.getTerm("activity-id", t)
            }
            getExperiment(t) {
                return _.isUndefined(t) ? this.getTerms("experiment-id") : this.getTerm("experiment-id", t)
            }
            getInstitution(t) {
                return _.isUndefined(t) ? this.getTerms("institution-id") : this.getTerm("institution-id", t)
            }
            getSource(t) {
                return _.isUndefined(t) ? this.getTerms("source-id") : this.getTerm("source-id", t)
            }
        }
        class g extends o {
            constructor(t, e) {
                super(t, e)
            }
        }
        class m extends o {
            constructor(t, e) {
                super(t, e)
            }
            getMipEra(t) {
                return _.isUndefined(t) ? this.getTerms("mip-era") : this.getTerm("mip-era", t)
            }
        }
        let T = null,
            y = null;
        const x = {
                dev: "http://localhost:5010",
                test: "https://test-pyessv.es-doc.org",
                prod: "https://errata.ipsl.fr"
            }[(() => window.location.host && window.location.host.indexOf("ipsl.fr") >= 0 ? window.location.host.indexOf("test") >= 0 ? "test" : "prod" : "dev")()] + "/1/retrieve",
            w = (t, e) => {
                $.get(x).done(e => {
                    _.each(e.data, t => {
                        switch (t.canonicalName) {
                            case "wcrp":
                                T = new p(t);
                                break;
                            case "esdoc":
                                y = new a(t)
                        }
                    }), t()
                }).fail(() => {
                    e()
                })
            }
    }])
});
